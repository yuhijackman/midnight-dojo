Project Midnight Dojo: æŠ€è¡“ä»•æ§˜æ›¸ & è¦ä»¶å®šç¾©
1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
Pathweaverã¯ã€ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®å­¦ç¿’ä½“é¨“ã‚’ã€Œé“å ´ï¼ˆDojoï¼‰ã€ã«è¦‹ç«‹ã¦ã¦æ•´ç†ã™ã‚‹ã€å­¦ç¿’ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ç®¡ç†Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚ã‚‹ã€‚ æ•£ã‚‰ã°ã‚ŠãŒã¡ãªå­¦ç¿’ãƒªã‚½ãƒ¼ã‚¹ã‚„ä¸æ˜ç¢ºãªã‚´ãƒ¼ãƒ«ã‚’ã€AIã«ã‚ˆã‚‹ã‚¬ã‚¤ãƒ‰ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼è‡ªèº«ã®ç·¨é›†ã«ã‚ˆã£ã¦ã€Œä¸€æœ¬ã®é“ï¼ˆPathï¼‰ã€ã¨ã—ã¦è¦–è¦šåŒ–ã—ã€æ•´ç†ã•ã‚ŒãŸç©ºé–“ï¼ˆCozy Spaceï¼‰ã§é›†ä¸­ã—ã¦å­¦ç¿’ã§ãã‚‹ç’°å¢ƒã‚’æä¾›ã™ã‚‹ã€‚
ã‚³ãƒ³ã‚»ãƒ—ãƒˆ
Metaphor: "Zen Modern Dojo"ï¼ˆé™è¬ã§ã€é›†ä¸­ã§ãã‚‹ç¾ä»£ã®é“å ´ï¼‰
Core Value: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®å®Œå…¨åˆ†é›¢ã€‚æ°´æ³³ã€ã‚¹ãƒšã‚¤ãƒ³èªã€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãªã©ã€ç•°ãªã‚‹å­¦ç¿’ãƒ†ãƒ¼ãƒã‚’ç‹¬ç«‹ã—ãŸã€Œã‚¢ã‚«ãƒ‡ãƒŸãƒ¼ã€ã¨ã—ã¦æ‰±ã„ã€é ­ã®åˆ‡ã‚Šæ›¿ãˆã‚’å®¹æ˜“ã«ã™ã‚‹ã€‚
Vibe: Cozy, Focused, Minimalist, Wabi-Sabi.

2. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ (Tech Stack)
Frontend
Framework: Next.js (App Router)
Language: TypeScript
Styling: Tailwind CSS
UI Library: shadcn/ui, Lucide React
Animation: Framer Motion (é“å ´ã®æ²¡å…¥æ„Ÿæ¼”å‡º)
Drag & Drop: dnd-kit (ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã®ä¸¦ã³æ›¿ãˆ)
Lint/Format: Biome
Backend / Infrastructure
BaaS: Supabase
Database: PostgreSQL
Auth: Supabase Auth (Google / Apple / GitHub)
ORM/Query: Supabase JS Client (Type-safe)
AI
Integration: Vercel AI SDK
Model: OpenAI (GPT-4o) or Gemini 1.5 Pro via API

3. ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ å®šç¾©
ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ ("Modern Wabi-Sabi")
Tailwind configã«è¨­å®šã™ã¹ãè‰²å®šç¾©ã€‚
Base (èƒŒæ™¯): #F8F5F0 (Washi White)
Content (æ–‡å­—): #2D2D2D (Sumi Black)
Primary (ã‚¢ã‚¯ã‚»ãƒ³ãƒˆ): #2E4E7E (Indigo - Seikaiha)
Success (å®Œäº†): #4A6741 (Matcha Green)
Highlight: #C5A059 (Kintsugi Gold)
Muted: #D1CDC7 (Shikkui Gray)
ã‚¿ã‚¤ãƒã‚°ãƒ©ãƒ•ã‚£
Headings: Serif (Shippori Mincho or Noto Serif JP) - é“å ´ã®çœ‹æ¿ã€å³æ ¼ã•ã€‚
Body: Sans-serif (Inter, Noto Sans JP) - å¯èª­æ€§ã€ãƒ¢ãƒ€ãƒ³ãªãƒ„ãƒ¼ãƒ«æ„Ÿã€‚

4. æ©Ÿèƒ½è¦ä»¶ (Core Features)
A. ã‚¢ã‚«ãƒ‡ãƒŸãƒ¼ï¼ˆDojoï¼‰ç®¡ç†
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è¤‡æ•°ã®ã€Œã‚¢ã‚«ãƒ‡ãƒŸãƒ¼ã€ã‚’ä½œæˆã§ãã‚‹ã€‚
å„ã‚¢ã‚«ãƒ‡ãƒŸãƒ¼ã¯å®Œå…¨ã«ç‹¬ç«‹ã—ã€ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼ã‚„ã‚¢ã‚¤ã‚³ãƒ³ã‚’è¨­å®šå¯èƒ½ã€‚
ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆã‚¨ãƒ³ãƒˆãƒ©ãƒ³ã‚¹ï¼‰ã‹ã‚‰å„é“å ´ã¸é·ç§»ã™ã‚‹UXã€‚
B. ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ»ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—
AIç”Ÿæˆ: ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆä¾‹: "React Native"ï¼‰ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€AIãŒå­¦ç¿’ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆãƒãƒ¼ãƒ‰ï¼‰ã‚’è‡ªå‹•ç”Ÿæˆã€‚
æ‰‹å‹•ç·¨é›†: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒãƒ¼ãƒ‰ã®è¿½åŠ ã€å‰Šé™¤ã€ãƒ†ã‚­ã‚¹ãƒˆç·¨é›†ãŒå¯èƒ½ã€‚
ä¸¦ã³æ›¿ãˆ: dnd-kit ã‚’ä½¿ç”¨ã—ã€ãƒãƒ¼ãƒ‰ã‚’ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ã§ä¸¦ã³æ›¿ãˆå¯èƒ½ã€‚é–“ã«æ–°ã—ã„ãƒãƒ¼ãƒ‰ã‚’ã€Œå·®ã—è¾¼ã‚€ã€UIã‚’æä¾›ã€‚
C. ãƒŠãƒ¬ãƒƒã‚¸ãƒ»ã‚¢ãƒ³ã‚«ãƒ¼ï¼ˆãƒªã‚½ãƒ¼ã‚¹ç®¡ç†ï¼‰
å„ãƒãƒ¼ãƒ‰ï¼ˆã‚¹ãƒ†ãƒƒãƒ—ï¼‰ã«ç´ã¥ããƒªã‚½ãƒ¼ã‚¹ï¼ˆURL, ãƒ¡ãƒ¢ï¼‰ã‚’ç®¡ç†ã€‚
Space Isolation: ãã®ãƒãƒ¼ãƒ‰ã«é–¢é€£ã™ã‚‹æƒ…å ±ã®ã¿ã‚’è¡¨ç¤ºã—ã€ä»–ã®æƒ…å ±ã®ãƒã‚¤ã‚ºã‚’æ’é™¤ã™ã‚‹ã€‚

5. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ« & ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ (Supabase)
Supabaseã®SQLã‚¨ãƒ‡ã‚£ã‚¿ã§å®Ÿè¡Œã™ã‚‹å®šç¾©ã€‚
ç‰¹è¨˜äº‹é …
Fractional Indexing: nodes ãƒ†ãƒ¼ãƒ–ãƒ«ã® position ã‚«ãƒ©ãƒ ã¯ DOUBLE PRECISION ã‚’ä½¿ç”¨ã€‚é »ç¹ãªä¸¦ã³æ›¿ãˆæ™‚ã®DBè² è·ã‚’è»½æ¸›ã™ã‚‹ã€‚
RLS: å…¨ãƒ†ãƒ¼ãƒ–ãƒ«ã§Row Level Securityã‚’æœ‰åŠ¹åŒ–ã—ã€ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ã‚’åˆ¶é™ã€‚
SQL Schema
SQL
-- 1. Enums
CREATE TYPE node_status AS ENUM ('locked', 'ready', 'in_progress', 'completed');
CREATE TYPE resource_type AS ENUM ('link', 'memo', 'video', 'book');

-- 2. Profiles
CREATE TABLE profiles (
  id UUID REFERENCES auth.users(id) ON DELETE CASCADE PRIMARY KEY,
  display_name TEXT,
  avatar_url TEXT,
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);

-- 3. Academies (The Dojos)
CREATE TABLE academies (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id UUID REFERENCES profiles(id) ON DELETE CASCADE NOT NULL,
  title TEXT NOT NULL,
  description TEXT,
  theme_color TEXT DEFAULT 'indigo',
  icon TEXT DEFAULT 'ğŸ“š', 
  is_archived BOOLEAN DEFAULT false,
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);
CREATE INDEX idx_academies_user_id ON academies(user_id);

-- 4. Nodes (The Stepping Stones)
CREATE TABLE nodes (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  academy_id UUID REFERENCES academies(id) ON DELETE CASCADE NOT NULL,
  title TEXT NOT NULL,
  description TEXT,
  status node_status DEFAULT 'ready',
  position DOUBLE PRECISION NOT NULL DEFAULT 65535.0, -- Fractional Indexing
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);
CREATE INDEX idx_nodes_academy_order ON nodes(academy_id, position ASC);

-- 5. Resources (The Scrolls)
CREATE TABLE resources (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  node_id UUID REFERENCES nodes(id) ON DELETE CASCADE NOT NULL,
  title TEXT NOT NULL,
  url TEXT,
  content TEXT, 
  type resource_type DEFAULT 'link',
  is_ai_suggested BOOLEAN DEFAULT false,
  created_at TIMESTAMPTZ DEFAULT now()
);
CREATE INDEX idx_resources_node_id ON resources(node_id);

-- RLS Policies (Simplified)
ALTER TABLE profiles ENABLE ROW LEVEL SECURITY;
ALTER TABLE academies ENABLE ROW LEVEL SECURITY;
ALTER TABLE nodes ENABLE ROW LEVEL SECURITY;
ALTER TABLE resources ENABLE ROW LEVEL SECURITY;

-- (Insert typical RLS policies here ensuring users only access their own data via user_id cascading)


6. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ (Feature-based Architecture)
æ©Ÿèƒ½å˜ä½ã§é–¢å¿ƒã‚’åˆ†é›¢ã™ã‚‹æ§‹æˆã‚’æ¡ç”¨ã€‚
Plaintext
src/
â”œâ”€â”€ app/                  # Next.js App Router
â”‚   â”œâ”€â”€ (auth)/           # Login/Signup
â”‚   â”œâ”€â”€ (main)/           # Dashboard (Entrance)
â”‚   â””â”€â”€ [academyId]/      # Academy Detail (The Roadmap)
â”œâ”€â”€ features/             # Business Logic & Components per Domain
â”‚   â”œâ”€â”€ auth/             
â”‚   â”œâ”€â”€ academy/          # Academy CRUD
â”‚   â”œâ”€â”€ roadmap/          # Node UI, Drag&Drop Logic, AI Gen
â”‚   â””â”€â”€ resources/        # Resource Drawer & Management
â”œâ”€â”€ components/           # Shared UI (Buttons, Layouts)
â”‚   â””â”€â”€ ui/               # shadcn components
â”œâ”€â”€ lib/                  # Utilities (Supabase client, utils)
â”œâ”€â”€ hooks/                # Shared Hooks
â””â”€â”€ types/                # Global Types


7. é–‹ç™ºè€…ã¸ã®æŒ‡ç¤º (Agent Persona Instructions)
Role: Senior Frontend Architect & UI Designer.
Priorities:
Type Safety: TypeScriptã®å‹å®šç¾©ã‚’å³æ ¼ã«è¡Œã†ã“ã¨ã€‚
Performance: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§ã®ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ã¯ã‚¹ãƒ ãƒ¼ã‚ºã«å®Ÿè£…ã™ã‚‹ã“ã¨ã€‚
Aesthetics: "Cozy Dojo"ã®é›°å›²æ°—ã‚’å®ˆã‚‹ã“ã¨ã€‚ã‚·ãƒ£ãƒ‰ã‚¦ã‚’ä¹±ç”¨ã›ãšã€ä½™ç™½ã¨è‰²ä½¿ã„ã§éšå±¤ã‚’è¡¨ç¾ã™ã‚‹ã€‚
Clean Code: Feature-basedãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’éµå®ˆã—ã€ãƒ­ã‚¸ãƒƒã‚¯ã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ãƒ™ã‚¿æ›¸ãã—ãªã„ã€‚
Database Constraints: updated_at ã®æ›´æ–°ã«ã¯Supabaseã® moddatetime æ‹¡å¼µã‚’ä½¿ç”¨ã™ã‚‹å‰æã§å®Ÿè£…ã™ã‚‹ã“ã¨ã€‚ã¾ãŸã€ä¸¦ã³æ›¿ãˆãƒ­ã‚¸ãƒƒã‚¯ã¯Fractional Indexingã‚’æ¡ç”¨ã™ã‚‹ã“ã¨ã€‚

